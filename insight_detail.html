<!DOCTYPE html>
<html>
  <head>
    <title>Band&Cast</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css"
    />
    <link rel="stylesheet" type="text/css" href="lib/fullpage/fullpage.css" />
    <link rel="stylesheet" type="text/css" href="css/reset.css" />
    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <link rel="stylesheet" type="text/css" href="css/theme.css" />
    <script
      src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
      integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI="
      crossorigin="anonymous"
    ></script>
    <!-- import CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/element-ui/lib/theme-chalk/index.css"
    />
    <!-- import JavaScript -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <!--  import d3 -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.16.0/d3.min.js"></script>
  </head>
  <body>
    <header class="border">
      <a class="logo" href="./index.html">Band<span>&</span>Cast</a>
      <ul class="menus">
        <li>
          <a href="./campaign.html">캠페인</a>
        </li>
        <li>
          <a href="./insight.html">#인사이트</a>
        </li>
        <li>
          <a href="./cs_notice_list.html">고객센터</a>
        </li>
        <li>
          <a href="./login.html">로그인</a>
        </li>
      </ul>
    </header>
    <main class="page insight-detail-page">
      <div>
        <p class="title">맛집 + 분위기</p>
        <div class="chart" id="canvas">
          <div class="netwrok-graph">
            <svg id="NETWORK_GRAPH">
            </svg>
          </div>
        </div>
      </div>
      <div>
        <div class="box">
          <p class="box-title">선택된 해시태그 목록</p>
          <ul class="btns">
            <li>#맛집</li>
          </ul>
        </div>
        <button class="btn btn-primary btn-search">인플루언서 검색</button>
      </div>
    </main>
    <footer>
      <div class="container">
        <p class="logo">Band<span>&</span>Cast</p>
        <p class="item mt-20">
          <span>대표자 : 홍길동</span>
          <span>주소 : 서울특별시 강남구 역삼동</span>
        </p>
        <p class="item">
          <span>이메일 : abc@abc.com</span>
          <span>사업자등록번호 : 123-123-1234</span>
          <span>등록일 : 2023. 01. 01 </span>
        </p>
        <p class="item">Copyright(c) 2022 Band&Cast All Rights Reserved.</p>
      </div>
    </footer>
  </body>
  <style>
    .netwrok-graph {
      width: 800px;
    }
  </style>
  <script>
    var NETWORK_DATA = {
  "nodes": [
	  {
		"id": "맛집",
		"value": 8,
		"depth": 0
	  },
	  {
		"id": "한식",
		"value": 6,
		"depth": 1
	  },
	  {
		"id": "일식",
		"value": 6,
		"depth": 1
	  },
    {
		"id": "양식",
		"value": 6,
		"depth": 1
	  },
    {
		"id": "중식",
		"value": 6,
		"depth": 1
	  },
    {
		"id": "떡국",
		"value": 4,
		"depth": 2
	  },
    {
		"id": "수제비",
		"value": 4,
		"depth": 2
	  },
    {
		"id": "자장면",
		"value": 4,
		"depth": 2
	  },
    {
		"id": "마파두부",
		"value": 4,
		"depth": 2
	  },
    {
		"id": "스시",
		"value": 4,
		"depth": 2
	  },
    {
		"id": "라멘",
		"value": 4,
		"depth": 2
	  },
    {
		"id": "피자",
		"value": 4,
		"depth": 2
	  },
    {
		"id": "파스타",
		"value": 4,
		"depth": 2
	  },
   ],
  "links": [
	  {
		"source": "맛집",
		"target": "한식",
	  },
	  {
		"source": "맛집",
		"target": "일식",
	  },
	  {
		"source": "맛집",
		"target": "중식",
	  },
	  {
		"source": "맛집",
		"target": "양식",
	  },
	  {
		"source": "한식",
		"target": "떡국",
	  },
	  {
		"source": "한식",
		"target": "수제비",
	  },
	  {
		"source": "중식",
		"target": "자장면",
	  },
	  {
		"source": "중식",
		"target": "마파두부",
	  },
	  {
		"source": "일식",
		"target": "스시",
	  },
	  {
		"source": "일식",
		"target": "라멘",
	  },
	  {
		"source": "양식",
		"target": "피자",
	  },
	  {
		"source": "양식",
		"target": "파스타",
	  }
	]
};
    
		var networkGraph = {
			createGraph : function(){
				var links = NETWORK_DATA.links.map(function(d){
								return Object.create(d)
							});
				var nodes = NETWORK_DATA.nodes.map(function(d){
								return Object.create(d)
							});
				var color = function(d){
					var scale = d3.scaleOrdinal(d3.schemeCategory10);
					return (scale(d.group));
				};

				var width = 500;
				var height = 500;

				var simulation = d3.forceSimulation(nodes)
						  .force("link", d3.forceLink(links).id( function(d){ return d.id }))
						  .force("charge", d3.forceManyBody().strength(-100))
						  .force("center", d3.forceCenter(width / 2, height / 2))
						  .force("collide",d3.forceCollide().radius( function(d){ return d.value*8}) );

				var svg = d3.select("#NETWORK_GRAPH")
							.attr("viewBox", [0, 0, width, height]);
				var gHolder = svg.append("g")
									.attr("class", "g-holder");
				var link = gHolder.append("g")
								.attr("stroke", "#999")
								.attr("stroke-opacity", 0.6)
							.selectAll("line")
								.data(links)
								.join("line")
									.attr("stroke-width", function(d){ return Math.sqrt(d.value*5)} );

				var node = gHolder.append("g")
							.attr("class", "circle-node-holder")
						.selectAll("g")
							.data(nodes)
							.enter()
							.append("g")
							.each(function(d){
								d3.select(this)
									.append("circle")
									.attr("r", d.value*5)
									.attr("fill", ['#3182f6', '#09cc7a', '#4c5864'][d.depth]);
								d3.select(this)
									.append("text").text(d.id)
									.attr("dy",6)
									.style("text-anchor","middle")
                  .style("font-size", ['22px', '16px', '12px'][d.depth])
                  .style("fill", "#fff")
									.attr("class", "node-label")
							}).call(networkGraph.drag(simulation));

				simulation.on("tick", function(){
					link.attr("x1", function(d){ return d.source.x; })
						.attr("y1", function(d){ return d.source.y; })
						.attr("x2", function(d){ return d.target.x; })
						.attr("y2", function(d){ return d.target.y; });

					node.attr("transform", function(d) { return "translate("+d.x+","+ d.y+")"; });
				});

				return svg.node();
			},
			drag : function(simulation){
				function dragstarted(d) {
					if (!d3.event.active) simulation.alphaTarget(0.3).restart();
					d.fx = d.x;
					d.fy = d.y;
				}

				function dragged(d) {
					d.fx = d3.event.x;
					d.fy = d3.event.y;
				}

				function dragended(d) {
					if (!d3.event.active) simulation.alphaTarget(0);
					d.fx = null;
					d.fy = null;
				}

				return d3.drag()
					.on("start", dragstarted)
					.on("drag", dragged)
					.on("end", dragended);
			}
		}

		networkGraph.createGraph();
  </script>
</html>
